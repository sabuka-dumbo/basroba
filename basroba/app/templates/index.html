{% extends 'layout.html' %}
{% load static %}

{% block head %}
    <link rel="stylesheet" href="{% static 'css/styles.css' %}">
{% endblock %}


{% block title %}
    BASROBA
{% endblock %}

{% block body %}
    <div class="video-slider">
        <video class="video-slide active" src="{% static 'videos/video1.mp4' %}" autoplay muted></video>
        <video class="video-slide" src="{% static 'videos/video2.mp4' %}" muted></video>
        <video class="video-slide" src="{% static 'videos/video3.mp4' %}" muted></video>

        <div class="dots">
            <div class="dot active"></div>
            <div class="dot"></div>
            <div class="dot"></div>
        </div>
    </div>

    <section class="section2">
        <h1 class="section2-title">{% trans "CATEGORIES" %}</h1>

        <div class="categories-div">
            <a href="{% url 'products' category_name='Jacket' %}" class="category-1" style="text-decoration: none; color: white;">
                <div class="category-1">
                    <img src="{% static 'pics/Picure2.png' %}" class="category-image" alt="">
                    <h1 class="category-text">{% trans "Jackets" %}</h1>
                </div>
            </a>

            <a href="{% url 'products' category_name='Accessories' %}" class="category-2" style="text-decoration: none; color: white;">
                <div class="category-2">
                    <img src="{% static 'pics/Picture3.png' %}" class="category-image" alt="">
                    <h1 class="category-text">{% trans "Accessories" %}</h1>
                </div>
            </a>

            <a href="{% url 'products' category_name='Bags' %}" class="category-3" style="text-decoration: none; color: white;">
                <div class="category-3">
                    <img src="{% static 'pics/Picture4.png' %}" class="category-image" alt="">
                    <h1 class="category-text">{% trans "Bags" %}</h1>
                </div>
            </a>
        </div>
    </section>

    <section class="section2">
        <h2 class="section2-title">{% trans "PRODUCTS" %}</h2>
        
        <div class="products-div">
            {% for product in all_products %}
                <a href="{% url 'product' product.pk %}" style="text-decoration: none; color: white;">
                    <div class="product-card">
                        <img src="{{ product.Product_image1.url }}" class="product-image" alt="">
                        <h3 class="product-text">{{ product.Product_name }}</h3>
                        {% if product.is_sold_out %}
                            <p class="product-price" style="color: red;">{% trans "Sold Out" %}</p>
                        {% else %}
                            <p class="product-price">{{ product.Product_price_new }} â‚¾</p>
                        {% endif %}
                    </div>
                </a>
            {% endfor %}
        </div>
    </section>

    <script>
        const videos = document.querySelectorAll(".video-slide");
        const dots = document.querySelectorAll(".dot");
        let currentIndex = 0;

        function showVideo(index) {
            videos.forEach((video, i) => {
                video.classList.remove("active");
                dots[i].classList.remove("active");
                video.pause();
                video.currentTime = 0;
            });
            videos[index].classList.add("active");
            dots[index].classList.add("active");
            videos[index].play();
        }

        videos.forEach((video, i) => {
            video.addEventListener("ended", () => {
                currentIndex = (i + 1) % videos.length;
                showVideo(currentIndex);
            });
        });

        dots.forEach((dot, i) => {
            dot.addEventListener("click", () => {
                currentIndex = i;
                showVideo(currentIndex);
            });
        });
    </script>
{% endblock %}